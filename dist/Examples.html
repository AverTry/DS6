<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/tailwind.css">
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>
  <title>Document</title>
</head>

<body class="bg-white p-20">
  <div x-data="{
    emails: [ '' ],
    addEmail: function () {
        this.emails.push('')
        this.$nextTick(() => {
            this.$refs[`email-${this.emails.length - 1}`].focus();
        });
    },
    removeEmail: function (index) {
        this.emails.splice(index, 1);
    },
    get filteredEmails () {
        return this.emails.filter(email => email.length);
    }
}" class="p-8 border border-gray-200 max-w-sm space-y-4 flex flex-col">

    <template x-for="(email, index) in emails">
      <div class="flex items-center space-x-2">
        <input type="email" :key="index" x-model="emails[index]" class="rounded border border-gray-300 px-3 py-2 text-gray-700 w-full focus:outline-none focus:shadow-outline" placeholder="Enter their email here..." @keydown.enter="addEmail" :x-ref="`email-${index}`">

        <button @click="removeEmail(index)" class="rounded-full p-1 text-gray-500 hover:text-gray-700 duration transition-150 focus:outline-none focus:shadow-outline">
          <svg class="w-5" fill="currentColor" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path d="M88.602 50c0-21.301-17.301-38.602-38.602-38.602S11.398 28.699 11.398 50 28.699 88.602 50 88.602 88.602 71.301 88.602 50zM41.2 64.801c-.8.8-1.898 1.2-3 1.2s-2.2-.4-3-1.2c-1.7-1.7-1.7-4.3 0-6l8.8-8.8-8.8-8.802c-1.7-1.699-1.7-4.3 0-6s4.3-1.699 6 0L50 44l8.802-8.8c1.699-1.7 4.3-1.7 6 0s1.699 4.3 0 6L56 50l8.8 8.801c1.7 1.7 1.7 4.3 0 6-.8.8-1.898 1.2-3 1.2-1.101 0-2.199-.4-3-1.2l-8.8-8.8z" /></svg>
        </button>
      </div>
    </template>

    <button @click="addEmail" class="self-end text-primary hover:underline focus:outline-none focus:shadow-outline rounded animate-pulse">
      + Add new invite
    </button>

    {{-- For demonstration purposes: --}}

    <div class="text-sm p-4 rounded bg-gray-200 text-gray-500 font-mono">
      <p>// Emails to send to your backend...</p>
      <p class="mt-1">[ <span x-text="filteredEmails"></span> ]</p>
    </div>

  </div>

  <!-- Popover - No Library -->
  <div x-data="
    {
        open: false
    }
" class="relative p-8">

    <!-- Trigger element -->
    <button @mouseover="open = true" @mouseleave="open = false" class="bg-gray-400 text-gray-100 text-sm px-4 py-2 rounded hover:bg-gray-500 hover:text-white transition duration-150 shadow-sm">
      Hover to reveal all
    </button>

    <!-- Popover -->
    <!-- Make sure to add the requisite CSS for x-cloak: https://github.com/alpinejs/alpine#x-cloak -->

    <div x-cloak x-show.transition="open" id="popover" class="p-3 space-y-1 max-w-xl bg-white rounded shadow-2xl flex flex-col text-sm text-gray-600 mt-3 absolute z-20">
      <strong class="text-sm text-gray-800 font-semibold">What is this about?</strong>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa laborum incidunt debitis necessitatibus veritatis.</p>
    </div>

  </div>

  <!-- CSS for the arrow pseudoelement, not possible natively with Tailwind. Probably move this to your stylesheets. If you can find a Tailwind solution, please let me know! -->
  <style>
    #popover:before {
      content: "";
      position: absolute;
      bottom: 100%;
      left: 5%;
      margin-left: -10px;
      border-width: 7px;
      border-style: solid;
      border-color: transparent transparent lightgray transparent;
    }
  </style>

  <!-- Modal -->
  <div x-data="{
    open: false
}" x-init="
$watch('open', value => {
    const body = document.body;
    if(!open) {
       body.classList.remove('h-screen');
       return body.classList.remove('overflow-hidden');
    } else {
        body.classList.add('h-screen');
        return body.classList.add('overflow-hidden');
    }
});" class="p-8">

    <!-- Make sure to add the requisite CSS for x-cloak: https://github.com/alpinejs/alpine#x-cloak -->

    <div x-cloak x-ref="modal" x-show.transition.opacity="open" class="fixed z-20 top-0 left-0 w-screen h-screen bg-gray-500 bg-opacity-25 flex items-center justify-center" role="dialog" aria-modal="true">

      <div @mousedown.away="open = false" @keydown.window.escape="open = false" class="w-full max-w-screen-sm bg-white rounded shadow-xl flex flex-col absolute divide-y divide-gray-200">

        <div class="px-5 py-4 flex items-center justify-between">
          <h2 class="text-xl leading-tight text-gray-700">
            Are you sure?
          </h2>


          <button class="text-gray-400 hover:text-gray-600" @click="open = false">
            <svg class="w-4 fill-current transition duration-150" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001">
              <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0014.143 5.857 19.94 19.94 0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z" /></svg>
          </button>
        </div>

        <div class="p-5">
          <p class="text-sm text-gray-600">Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde at omnis voluptas quo eum aspernatur nesciunt accusamus voluptates aliquid animi architecto quasi illo similique, nobis corporis excepturi? Maiores, iusto eveniet.</p>
        </div>

        <div class="flex items-center justify-end px-5 py-4 space-x-2">
          <button @click="open = false" class="rounded px-5 py-2 border border-gray-300 text-gray-600 font-semibold transition duration-150 hover:border-gray-400 hover:text-gray-900 focus:outline-none focus:shadow-outline">Cancel</button>

          <button class="rounded px-5 py-2 bg-indigo-600 text-white font-semibold transition duration-150 hover:bg-indigo-500 focus:outline-none focus:shadow-outline">Action</button>
        </div>

      </div>


    </div>


    <button @click="open = true" class="px-5 py-2 rounded bg-indigo-600 text-white font-semibold transition duration-150 hover:bg-indigo-500 focus:outline-none focus:shadow-outline">Open Modal</button>

  </div>
</body>

</html>